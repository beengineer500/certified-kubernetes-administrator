### 193. prac - Network Policy
- 현재 존재하는 네트워크 폴리시 확인
```bash
controlplane ~ ➜  k get netpol
NAME             POD-SELECTOR   AGE
payroll-policy   name=payroll   60s
```

- 네트워크 폴리시 상세 정보 확인
```bash
controlplane ~ ➜  k describe netpol payroll-policy 
Name:         payroll-policy
Namespace:    default
Created on:   2025-08-09 15:35:29 +0000 UTC
Labels:       <none>
Annotations:  <none>
Spec:
  PodSelector:     name=payroll
  Allowing ingress traffic:
    To Port: 8080/TCP
    From:
      PodSelector: name=internal
  Not affecting egress traffic
  Policy Types: Ingress
```


- 다음의 조건을 만족하는 네트워크 폴리시 생성
	- Policy Name: internal-policy
	- Policy Type: Egress
	- Egress Allow: payroll
	- Payroll Port: 8080
	- Egress Allow: mysql
	- MySQL Port: 3306
```yaml
controlplane ~ ➜  cat internal-policy.yaml 
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: internal-policy
spec:
  podSelector:
    matchLabels:
      name: internal-policy
  policyTypes:
  - Egress
  egress:
  - to:
    - podSelector:
        matchLabels:
          name: payroll
    - podSelector:
        matchLabels:
          name: mysql
    ports:
    - protocol: TCP
      port: 3306
    - protocol: TCP
      port: 8080

controlplane ~ ➜  k apply -f internal-policy.yaml 
networkpolicy.networking.k8s.io/internal-policy created
```




---

# References
-