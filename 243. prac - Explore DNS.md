---
index: "[[ğŸ· Lecture Notes]]"
tags:
  - Kubernetes
  - Kubernetes/k8s
  - Kubernetes/Network
  - Kubernetes/CoreDNS
created: 2025-05-26 09:20
status: 
source_url:
---
>[!info] Link
>- 

---

### 243. prac - Explore DNS
- í´ëŸ¬ìŠ¤í„°ì— êµ¬í˜„ë¼ ìˆëŠ” DNS ì†”ë£¨ì…˜ ì¢…ë¥˜ ë° Pod ê°œìˆ˜ í™•ì¸
```bash
controlplane ~ âœ  k get po -n kube-system
NAME                                   READY   STATUS    RESTARTS   AGE
coredns-7484cd47db-cl2qz               1/1     Running   0          14m
coredns-7484cd47db-kfnml               1/1     Running   0          14m
etcd-controlplane                      1/1     Running   0          14m
kube-apiserver-controlplane            1/1     Running   0          14m
kube-controller-manager-controlplane   1/1     Running   0          14m
kube-proxy-nmll5                       1/1     Running   0          14m
kube-scheduler-controlplane            1/1     Running   0          14m
```

- CoreDNSì— ì•¡ì„¸ìŠ¤í•˜ëŠ” ì„œë¹„ìŠ¤ í™•ì¸,
  Podë“¤ì´ CoreDNSì™€ í†µì‹ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” IP ì£¼ì†Œ í™•ì¸
```Shell
controlplane ~ âœ  kubectl get svc -n kube-system
NAME       TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)                  AGE
kube-dns   ClusterIP   172.20.0.10   <none>        53/UDP,53/TCP,9153/TCP   17m
```

- CoreDNS ì„¤ì • íŒŒì¼
	- Corefileì€ CoreDNS íŒŒë“œ
```bash
/etc/coredns/Corefile
```

- Corefileì€ CoreDNS íŒŒë“œì—ê²Œ `ConfigMap`ìœ¼ë¡œ ì „ë‹¬ëœë‹¤.
```bash
controlplane ~ âœ  k get configMap -n kube-system
NAME                                                   DATA   AGE
coredns                                                1      27m
...
```

- ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ Root Domainì€ `cluster.local`ì´ë‹¤. ë‘˜ ë‹¤ ì…ë ¥í•´ì•¼ í•œë‹¤. `cluster.local` ìì²´ê°€ root domainì´ê¸° ë•Œë¬¸ì—, ë‹¤ë¥¸ ì„œë¸Œ ë„ë©”ì¸ì²˜ëŸ¼ `.`ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ ì„œ ë„ë©”ì¸ì„ ì…ë ¥í•˜ë©´ í†µì‹ ì´ ì•ˆëœë‹¤.

- ë™ì¼ ë„¤ì„ ìŠ¤í˜ì´ìŠ¤ì— ìˆëŠ” `test` íŒŒë“œì—ì„œ `hr` íŒŒë“œì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ë„ë©”ì¸ë„¤ì„
	- ë™ì¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìˆëŠ” ì„œë¹„ìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê²½ìš° ì„œë¹„ìŠ¤ ì´ë¦„ë§Œìœ¼ë¡œë„ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.
	  => `web-service` 
```bash
controlplane ~ âœ– k get po
NAME              READY   STATUS    RESTARTS   AGE
hr                1/1     Running   0          3m3s
simple-webapp-1   1/1     Running   0          2m48s
test              1/1     Running   0          3m2s


controlplane ~ âœ  k get svc
NAME           TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE
kubernetes     ClusterIP   172.20.0.1      <none>        443/TCP        8m33s
test-service   NodePort    172.20.141.39   <none>        80:30080/TCP   3m30s
web-service    ClusterIP   172.20.94.46    <none>        80/TCP         3m31s



controlplane ~ âœ  k describe svc web-service | grep -i selector
Selector:                 name=hr



controlplane ~ âœ– k get po --show-labels
NAME              READY   STATUS    RESTARTS   AGE     LABELS
hr                1/1     Running   0          4m31s   name=hr
simple-webapp-1   1/1     Running   0          4m16s   name=simple-webapp
test              1/1     Running   0          4m30s   name=test
```


- ì„œë¡œ ë‹¤ë¥¸ ë„¤ì„ ìŠ¤í˜ì´ìŠ¤ì— ìˆëŠ” `test` íŒŒë“œì—ì„œ `payroll` ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ë„ë©”ì¸ë„¤ì„
	- ë‹¤ë¥¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìˆëŠ” ì„œë¹„ìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê²½ìš° ì„œë¹„ìŠ¤ ì´ë¦„ ë’¤ì— ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì´ë¦„ì„ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.
	  => `web-service`.payroll 
```bash
controlplane ~ âœ  k get po
NAME              READY   STATUS    RESTARTS   AGE
hr                1/1     Running   0          10m
simple-webapp-1   1/1     Running   0          10m
test              1/1     Running   0          10m


controlplane ~ âœ  k get svc -n payroll 
NAME          TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE
web-service   ClusterIP   172.20.15.130   <none>        80/TCP    10m
```





---

# References
- 