### 293. Patches Dictionary
#### Patches 예시 - Jason 6902 (replace)
- `api-depl.yaml`
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      component: api
  template:
    metadata:
      labels:
        component: api
    containers:
      - name: nginx
        image: nginx
```

- `kustomization.yaml`
```yaml
...

patches:
  - target:
      kind: Deployment
      name: api-deployment
    patch: |-
      - op: replace
        path: /spec/template/metadata/labels/component
        value: web
```

#### Patches 예시 - Strategic Merge Patch (replace)
- `api-depl.yaml`
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      component: api
  template:
    metadata:
      labels:
        component: api
    containers:
      - name: nginx
        image: nginx
```

- `kustomization.yaml`
	- 인라인 방식 대신, 별도 파일을 활용하는 방식 사용
```yaml
patches:
  - label-patch.yaml
```

- `label-patch.yaml`
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-deployment
spec:
  template:
    metadata:
      labels:
        component: web
```

#### Patches 예시 - Json 6902 (add)
- `api-depl.yaml`
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      component: api
  template:
    metadata:
      labels:
        component: api
    containers:
      - name: nginx
        image: nginx
```

- `kustomization.yaml`
```yaml
patches:
  - target:
      kind: Deployment
      name: api-deployment
    patch: |-
      - op: add
        path: /spec/template/metadata/labels/org
        value: KodeKloud
```

#### Patches 예시 - Strategic Merge Patch (add)
- `api-depl.yaml`
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      component: api
  template:
    metadata:
      labels:
        component: api
    containers:
      - name: nginx
        image: nginx
```

- `kustomization.yaml`
```yaml
patches:
  - label-patch.yaml
```

- `label-patch.yaml`
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-deployment
spec:
  template:
    metadata:
      labels:
        org: KodeKloud
```

#### Patches 예시 - Json 6902 (remove)
- `api-depl.yaml`
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      component: api
  template:
    metadata:
      labels:
        component: api
    containers:
      - name: nginx
        image: nginx
```

- `kustomization.yaml`
```yaml
patches:
  - target:
      kind: Deployment
      name: api-deployment
    patch: |-
      - op: remove
        path: /spec/template/metadata/labels/org
```

#### Patches 예시 - Strategic Merge Patch (remove)
- `api-depl.yaml`
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      component: api
  template:
    metadata:
      labels:
        component: api
    containers:
      - name: nginx
        image: nginx
```

- `kustomization.yaml`
```yaml
patches:
  - label-patch.yaml
```

- `label-patch.yaml`
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-deployment
spec:
  template:
    metadata:
      labels:
        org: null
```