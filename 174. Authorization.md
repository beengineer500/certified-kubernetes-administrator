### 174. Authorization
 - 쿠버네티스 클러스터에 접근할 수 있는 주체는 관리자, 사용자(개발자), 봇(다른 애플리케이션 등)이 있다.
 - 쿠버네티스 클러스터 내에서 각 주체별로 권한에 차등을 두어, 수행할 수 있는 작업의 범위를 제한 및 구분해야 한다.

- Authorization 메커니즘에는 4가지가 있다.
	- Node
		- kubelet 처럼 System 그룹에 속한 경우, Node Authorizer에 의해 권한이 승인된다.
	- ABAC (Attribute Based Authorization Control, 속성 기반 권한 부여)
		- 사용자 또는 사용자 그룹들을 권한 집합으로 묶는다.
		- 사용자/그룹 관련 변경사항이 있을 때마다, 수동으로 편집 해줘야 한다. 매우 번거롭다.
	- RBAC (Role Based Access Control)
		- Role(역할)을 생성하고, 역할별로 적절한 권한을 설정한다.
		- 사용자를 해당하는 역할에 연결하면 된다.
		- 역할별로 권한 변경이 필요할 경우, 사용자는 신경안쓰고 역할의 권한 설정만 변경해주면 된다. 그러면 해당 역할에 속한 모든 사용자에게 적용된다.
		- 쿠버네티스에서 표준적인 관리 방법이다.
	- Webhook
		- 외부에서 권환 부여를 관리하려고 하는 경우 사용한다.
		- 사용자가 apiserver에 API 요청을 하면, apiserver는 사용자에 대한 인증을 외부 권한 관리 애플리케이션에 요청한다.
		- 외부 권환 관리 애플리케이션은 적절한 지 판단하고, 결과를 apiserver에게 반환한다.
		- 수신한 결과를 바탕으로 apiserver는 사용자의 요청을 수행하거나 거절한다.
	- AlwaysAllow
		- 권한 검사를 수행하지 않고, 항상 허용한다.
	- AlwaysDeny
		- 권한 검사를 수행하지 않고, 항상 거부한다.

- Authorization 메커니즘은 여러 개 사용 가능하다. 하지만, 각 메커니즘별로 실행되는 순서는 지정할 수 있다. `kube-apiserver`의 옵션에서 확인 가능하다.
	- 별도로 설정하지 않으면 기본 값은 `AlwaysAllow` 
	- 쉽표로 구분하여 여러 개의 메커니즘을 사용할 수 있다. 왼쪽에서부터 먼저 수행되는 메커니즘이다. 해당 메커니즘에서 판단이 안될 경우 다음 메커니즘으로 넘어가서 권한을 판단한다. 
```bash
...
  --authorization-mode=AlwaysAllow    # 기본값
  --authorization-mode=Node,RBAC,Webhook    # Node -> RBAC -> Webhook
...
```