### 272. Helm Chart
- 차트는 헬름/쿠버네티스 입장에서 애플리케이션 설치를 위한 설명서와 같다. 관리자에게는 애플리케이션을 구성하는 YAML 파일들의 모음이다. 
- 관리자는 `values.yaml`을 통해서 애플리케이션을 구성하는 객체들을 원하는 대로 수정하여 배포할 수 있다.

- 헬름 차트는 크게 다음과 같은 파일들로 구성된다.
	- templates
		- 애플리케이션을 구성하는 객체들의 표준 형태 YAML 파일들로 구성돼 있다. 
	- values.yaml
		- 템플릿 내 YAML 파일들의 설정을 매개변수 형태로 편집할 수 있다.
	- Chart.yaml
		- 헬름 차트 API 버전, 앱 버전 등 차트 자체에 대한 정보가 포함된다.

- templates 예시
```yaml
---
# service.yaml
apiVersion: v1
kind: Service
metadata:
  name: hello-world
spec:
  type: NodePort
  ports:
  - name: http
    port: 80
    targetPort: 80
    protocol: TCP
  selector:
    app: hello-world
---
# deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hello-wordl
spec:
  replicas: {{ .Values.replicaCount }}
  selector:
    matchLabels:
      app: hello-world
  templates:
    metadata:
      labels:
        app: hello-world
      image: "{{ .Values.image.repository }}"
      ports:
        - name: http
          containerPort: 80
          protocol: TCP
---
```

- `values..yaml` 예시
```yaml
replicaCount: 1

image:
  repository: nginx
```

- `Chart.yaml`
```yaml
apiVersion: v2
appVersion: "1.16.0"
name: hello-world
description: A web application

type: application
```


**Chart.yaml**
- 예시
	- `apiVersion` 
		- 차트의 API 버전을 나타낸다.
			- v1 : helm v2 차트
			- v2 : helm v3 차트
	- `appVersion`
		- 애플리케이션 버전을 나타낸다. 정보 제공 목적이다.
	- `Version` 
		- 차트 자체의 버전을 나타낸다. 차트의 변경사항을 추적할 수 있다. 모든 차트는 차트의 버전을 명시해야 한다.
	- `type`
		- `application`
			- 기본 값이다. 
			- 애플리케이션 배포를 위한 차트 유형이다.
		- `libray`
			- 유틸리티(편의성)를 제공하는 차트 유형이다.
	- `dependancies`
		- 종속성을 나타낸다.
		- 현재 차트가 배포하는 애플리케이션이 종속성을 가지는 다른 애플리케이션의 헬름 차트를 명시한다.
		- 이를 통해서, 매니페스트 파일을 통합할 필요가 없어진다.
	- `kewords`
		- 애플리케이션과 관련된 키워드들을 명시한다.
		- 차트 검색 시 활용된다.
	- `maintainers`
		- 차트 관리자에 대한 정보가 명시돼 있다.
```yaml
apiVersion: v2    # 차트의 API 버전 : v1(helmv2 차트), v2(helmv3 차트)
appVersion: 5.8.1    # 애플리케이션 버전 (정보제공 목적)
Version: 12.1.27    # 차트 자체의 버전. 모든 차트는 차트의 버전 명시 필요
name: wordpress    # 차트의 이름
description: Web ...    
type: application    # application || libray
dependancies:
  - condition: mariadb.enabled
    name: mariadb
    repository: https//charts.bitrnami.com/bitnami
   version: 9.x.x
   <code hidden>
kerwords:
  - application
  - blog
  - wordpress
maintainers:
  - email: containers@bitnami.com
    name: Bitnami
home: https://github.com/bitnami/charts/tree/master/bitnami.wordpress
icon: https://bitnami.com/assets/stacks/wordpress/img/wordpress-stack-220x234.png

```

**Helm Chart 구조**
- `hello-word-chart`
	- `templates` : 템플릿들을 담는 디렉터리
	- `values.yaml` 
	- `Chart.yaml`
	- `LICENSE`
	- `README.md`
	- `charts` : 종속성을 가지는 차트들을 담는 디렉터리