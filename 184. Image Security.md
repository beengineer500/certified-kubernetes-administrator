### 184. Image Security
- 이미지 이름 구성요소
	- `image: <REGISTRY>/<USER||ACCOUNT>/<IMAGE||REPOSITORY>`
		- `<USER||ACCOUNT>` : 별도로 명시하지 않을 경우, `library`가 기본값이다.
		- `<REGISTRY>` : 별도로 명시하지 않을 경우, `docker.io`가 기본값이다.
		- Ex) `image: docker.io/library/nginx`

- 도커는 사설 레지스트리를 제공한다. 다음의 명령을 입력하고 자격증명을 통해 로그인하면 된다.
```bash
docker login private-registry.io
```

- 도커 사설 레지스트리에 있는 이미지를 통해서 파드를 실행
```bash
docker run private-registry.io/apps/internal-app
```

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod
spec:
  containers:
  - name: nginx
    image: private-registry.io/apps/internal-app
```

- 도커 사설 레지스트리에 접근하기 위해서는 자격증명이 필요하다. 이를 어떻게 파드에 부여?
	- 쿠버네티스에서는 `docker-registry`라는 도커 자격증명을 위한 시크릿 유형을 가지고 있다.

- 도커 레지스트리 인증을 위한 시크릿 생성
```bash
> kubectl create secret docker-registry regcred \
> --docker-server=private-registry.io \
> --docker-username=registry-user \
> --docker-password=registry-passwd \
> --docker-email=registry-user@org.com
```

- 메니페스트에 `spec.imagePullSecrets` 필드 추가
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod
spec:
  containers:
  - name: nginx
    image: private-registry.io/apps/internal-app
  imagePullSecrets:
  - name: regcred
```