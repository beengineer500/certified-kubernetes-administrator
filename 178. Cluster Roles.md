### 178. Cluster Roles
- 롤과 롤 바인딩은 네임스페이스 내에서 생성된다. 별도 네임스페이스를 지정하지 않으면 `default` 네임스페이스에 생성된다. 즉, 네임스페이스 내에서 권한 및 접근이 제어된다.

- 네임스페이스 및 클러스터 범위 리소스 확인 방법
```bash
# 네임 스페이스 범위
kubectl api-reousrces --namespaced=true

# 클러스터
kubectl api-reousrces --namespaced=false
```

- 예시

| 네임스페이스 범위   | 클러스터 범위                    |
| ----------- | -------------------------- |
| pod         | node                       |
| replicaset  | PB                         |
| job         | clusterRole                |
| deployment  | clusterRoleBinding         |
| service     | certifdicateSigningReqeust |
| secret      | namespace                  |
| role        |                            |
| rolebinding |                            |
| configMap   |                            |
| PVC         |                            |

- 클러스터 범위에 대해서 권한을 부여하기 위해서는  클러스터 롤, 클러스터 롤 바인딩을 사용해야 한다.
	- 클러스터 수준의 리소스 뿐만 아니라, 네임스페이스 수준 리소스에 대해서도 권한이 부여 가능하다. 이 경우, 모든 네임 스페이스에 걸쳐 해당 리소스 제어가 가능해진다.
		- 일반적인 롤에서 Pod 제어 권한을 부여하면, 특정 네임스페이스 내에 있는 pod만 제어 가능하다. 하지만 클러스터 롤-롤바인딩으로 Pod 제어 권한을 부여하면, 모든 네임스페이스에 걸쳐 Pod 제어가 가능해진다.

- 클러스터 롤
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: cluster-administrator
rules:
- apiGroups: [""]
  resources: ["nodes"]
  verbs: ["list", "get", "create", "delete"]
```

- 클러스터 롤 바인딩
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: cluster-admin-role-bionding
subjects:
- kind: User
  name: cluster-admin
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: cluster-administrator
  apiGroup: rbac.authorization.k8s.io
```