### 238. Service Networking
- 서비스가 있으면, 클러스터의 모든 Pod에서 액세스 가능하다. 
- 파드는 노드 내에 배포되지만, 서비스는 클러스터 전체에서 호스팅된다. 서비스는 클러스터 내에서만 접근 가능하다. 이러한 유형의 서비스를 `Cluster IP`라고 한다.
- 클러스터 외부에서 접근하기 위해서는 `NodePort` 유형을 활용할 수 있다. `NodePort`서비스도 Cluster IP 유형처럼 IP 주소를 가지고, 클러스터 내 전체에서 접근 가능하다. 추가로, 클러스터 내 모든 노드의 특정 포트를 통해 애플리케이션을 외부로 노출 시킬 수 있다.  해당 포트를 통해서 클러스터 외부에서 클러스터 내 특정 애플리케이션에 접근할 수 있다.
- 서비스는 파드처럼 프로세스, 네임스페이스 또는 인터페이스를 가지고 있지 않다. 가상 오브젝트이다. kube-proxy에 의해 생성되는 IP & Port 정보를 기반으로 한 라우팅 규칙이다.
	- 이러한 규칙은 일반적으로 iptables를 통해 생성된다.
	- 서비스가 생성되면, 쿠버네티스는 서비스에게 IP를 할당한다. 서비스에 할당 가능한 IP 범위는 kube-apiserver의 옵션으로 지정된다. 기본값은 `10.0.0.0/24` 이다.
	- `kube-apiserver --service-cluster-ip-range <ipNet>` 
	- 쿠버네티스 클러스터를 구축할 떄, `pod-network-cidr`를 지정한다. 이 범위랑 `service-cluster-ip-range`가 겹치면 안된다.
	- `ps aux | grep kube-api-server` 를 통해 확인 가능하다.
	- `iptables -L -t nat | grep <SERVICE_NAME>` 을 통해서 iptabels 규칙 확인이 가능하다.
	- `cat /var/log/kube-proxy.log` 을 통해서, kube-proxy가 서비스 생성에 따른 규칙을 생성하는 로그를 확인할 수 있다.